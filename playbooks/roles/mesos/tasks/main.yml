# Mesos role (common to master/slave)

- name: Install APT Key for Mesosphere repository
  apt_key:
    keyserver=hkp://keyserver.ubuntu.com:80
    id=E56151BF
    state=present

- name: Install APT Mesosphere repository
  apt_repository:
    repo="deb http://repos.mesosphere.io/{{ ansible_distribution|lower }} {{ ansible_lsb.codename }} main"
    state=present

- name: Update APT
  apt: update_cache=yes

- name: Install Mesos package
  apt:
    pkg=mesos
    state=present
    force=yes
  tags: install

- name: Disable zookeeper service
  service:
    name=zookeeper
    enabled=no
    state=stopped
