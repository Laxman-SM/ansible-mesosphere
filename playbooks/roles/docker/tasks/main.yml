# Docker role

- name: Add debian wheezy-backports repository for kernel update
  apt_repository:
    repo="deb http://http.debian.net/debian wheezy-backports main"
    state=present
  tags: install

- name: Update APT
  apt: update_cache=yes
  tags: install

- name: Update Kernel
  apt:
    pkg="linux-image-amd64"
    default_release=wheezy-backports
    install_recommends=no
    state=latest
  tags: install

- name: Download Docker installation script
  get_url: url=https://get.docker.com dest=/opt/docker.sh mode=0755 force=no
  tags: install

- name: Install Docker from the script
  shell: /opt/docker.sh
  tags: install

- name: Enable Docker service
  service:
    name=docker
    enabled=yes
    state=started
  tags: service
